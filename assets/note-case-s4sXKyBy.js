import{_ as N,x as v,y as _,z as L,r as c,o as a,c as d,F as C,A as k,B as x,C as b,b as u,t as y,q as m,n as w,a as l,w as M,d as S,u as V}from"./index-CKH1BAu0.js";const f="va-note",z={name:"vaNote",props:{data:{type:Array,default(){return[]}},maxHeight:{type:[Number,String],default:200},width:{type:[Number,String]},height:{type:[Number,String],default:400}},data(){return{prefixCls:f,currentData:[],zIndex:1,borderWidth:0,borderHeight:0,documentMoveListener:null,documentMoveEndListener:null,offset:{x:0,y:0},isMobile:!1,currentNote:null,isDragging:!1,target:null,visible:!1,selectedItem:{title:"",content:""},oldSelectedItem:{title:"",content:""},selectedIndex:0}},computed:{classes(){return[f]},styles(){return{height:v(this.height),width:v(this.width)}}},methods:{openEditModal(t){this.visible=!0,this.selectedItem=this.currentData[t],this.oldSelectedItem={...this.selectedItem},this.selectedIndex=t},confirm(){this.currentData[this.selectedIndex]={...this.currentData[this.selectedIndex],...this.selectedItem},this.visible=!1},cancel(){this.currentData[this.selectedIndex]={...this.oldSelectedItem},this.visible=!1},handleMousedown(t,e){this.currentNote=t;const o=this.isMobile?e.changedTouches[0]:e;this.offset={x:o.pageX,y:o.pageY},this.resetDepth(),this.currentNote.zIndex=this.currentData.length,this.isDragging=!0,this.target=this.getChildNode(e),this.documentMoveListener=_(document,"mousemove",this.handleMousemove),this.documentMoveEndListener=_(document,"mouseup",this.handleMouseend)},handleMousemove(t){if(!this.isDragging)return;const e=this.isMobile?t.changedTouches[0]:t;let{x:o,y:i}=this.currentNote;if(o+=e.pageX-this.offset.x,i+=e.pageY-this.offset.y,this.borderWidth){const s=this.borderWidth-this.target.offsetWidth;o<0?o=0:o>s&&(o=s)}if(this.borderHeight){const s=this.borderHeight-this.target.offsetHeight;i<0?i=0:i>s&&(i=s)}this.currentNote.x=o,this.currentNote.y=i,this.offset={x:e.pageX,y:e.pageY}},handleMouseend(t){this.isDragging=!1,this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null),this.documentMoveEndListener&&(this.documentMoveEndListener(),this.documentMoveEndListener=null)},getChildNode(t){let e=t.target;for(;e&&!L(e,`${f}-item`);)e=e.parentNode;return e},getData(){Array.isArray(this.data)?this.currentData=this.data:this.currentData=[this.data];const t=[];let e=1;for(const o of this.currentData)t.push({x:e*10,y:0,rotate:0,zIndex:1,...o});this.currentData=t},cardStyles(t){return{left:t.x+"px",top:t.y+"px",transform:`rotate(${t.rotate}deg)`,zIndex:t.zIndex}},resetDepth(){for(const t of this.currentData)t.zIndex=1}},created(){this.getData(),this.isMobile="ontouchstart"in document},mounted(){const t=this.$refs.content,e=this.width?parseFloat(this.width,10):t.offsetWidth,o=this.height?parseFloat(this.height,10):t.offsetHeight;this.borderWidth=e,this.borderHeight=o}},E=["onDblclick","onMousedown"],H={class:"lined-paper"},W={key:0,class:"m-0"},O={key:1,class:"text-muted m-0"},U={class:"m-b-20"},A={class:"m-b-20"};function B(t,e,o,i,s,r){const D=c("va-template"),p=c("va-input"),I=c("va-modal");return a(),d("div",{class:x(r.classes),style:b(r.styles),ref:"content"},[(a(!0),d(C,null,k(s.currentData,(n,h)=>(a(),d("div",{class:x([`${s.prefixCls}-item`,"va-card-tile"]),key:h.toString(),style:b(r.cardStyles(n)),onDblclick:g=>r.openEditModal(h),onMousedown:g=>r.handleMousedown(n,g)},[u("div",H,[n.title?(a(),d("h4",W,y(n.title),1)):m("",!0),n.content?(a(),d("p",O,y(n.content),1)):m("",!0),n.type==="content"&&n.render?(a(),w(D,{key:2,data:n,index:h,render:n.render},null,8,["data","index","render"])):m("",!0)])],46,E))),128)),l(I,{header:"Add an Event",modelValue:s.visible,"onUpdate:modelValue":e[2]||(e[2]=n=>s.visible=n),onOnOk:r.confirm,onOnCancel:r.cancel},{default:M(()=>[u("div",U,[l(p,{class:"flex",border:!0,placeholder:"title",modelValue:s.selectedItem.title,"onUpdate:modelValue":e[0]||(e[0]=n=>s.selectedItem.title=n)},null,8,["modelValue"])]),u("div",A,[l(p,{class:"flex",border:!0,placeholder:"content",type:"textarea",modelValue:s.selectedItem.content,"onUpdate:modelValue":e[1]||(e[1]=n=>s.selectedItem.content=n)},null,8,["modelValue"])])]),_:1},8,["modelValue","onOnOk","onOnCancel"])],6)}const T=N(z,[["render",B],["__scopeId","data-v-e7940d36"]]),q={class:"va-page-box"},X=S({__name:"note-case",setup(t){const e=[{title:"This is my note #3",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad.",x:10},{title:"This is my note #3",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad.",x:20},{title:"This is my note #3",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad.",x:30}];return(o,i)=>{const s=c("va-card");return a(),d("div",q,[l(s,{header:"Note"},{default:M(()=>[l(V(T),{data:e})]),_:1})])}}});export{X as default};
